<Window
    x:Class="Player.MainUI" Background="Transparent"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" SizeChanged="Window_SizeChanged"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" KeyUp="Window_KeyUp"
    xmlns:player="clr-namespace:Player.Controls" xmlns:sys="clr-namespace:System;assembly=mscorlib"
    x:Name="window" MouseMove="Player_MouseMove"
    mc:Ignorable="d" Loaded="Window_Loaded" Closing="Window_Closing" Drop="Window_Drop" AllowDrop="True"
    Title="Elephant Player" Height="544" Width="432" >
    <Grid Background="{DynamicResource KeyOfBackground}" x:Name="ContentGrid">
        <MediaElement x:Name="Player" UnloadedBehavior="Manual" LoadedBehavior="Manual"
              MouseDown="Player_MouseDown">
            <MediaElement.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Toggle Full Screen" Click="Player_ContextFullScreen">
                        <MenuItem.Icon>
                            <player:MaterialIcon Icon="fullscreen" />
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </MediaElement.ContextMenu>
        </MediaElement>
        <ListView x:Name="QueueListView" BorderThickness="0" Margin="0, 0, 0, 85" ScrollViewer.CanContentScroll="False" Background="{DynamicResource KeyOfBackground}">
            <ListView.Resources>
                <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">10</sys:Double>
            </ListView.Resources>
        </ListView>
        <Label x:Name="TitleLabel" Content="Title" Foreground="White" Margin="60, 0, 0, 50" Height="30" VerticalAlignment="Bottom"/>
        
        <Image x:Name="MiniArtworkImage" Height="55" Width="55" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0,0,0,25">
            <Image.Triggers>
                <EventTrigger RoutedEvent="UIElement.MouseDown">
                    <BeginStoryboard>
                        <Storyboard Storyboard.TargetName="MiniArtworkImage" SpeedRatio="2" AccelerationRatio="0.3" DecelerationRatio="0.7">
                            <DoubleAnimation Storyboard.TargetProperty="Width" From="{Binding Width, ElementName=MiniArtworkImage}" To="400"/>
                            <DoubleAnimation Storyboard.TargetProperty="Height" From="{Binding Width, ElementName=MiniArtworkImage}" To="400"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="UIElement.MouseUp">
                    <BeginStoryboard>
                        <Storyboard Storyboard.TargetName="MiniArtworkImage" SpeedRatio="2" AccelerationRatio="0.3" DecelerationRatio="0.7">
                            <DoubleAnimation Storyboard.TargetProperty="Width" From="{Binding Width, ElementName=MiniArtworkImage}" To="55"/>
                            <DoubleAnimation Storyboard.TargetProperty="Height" From="{Binding Width, ElementName=MiniArtworkImage}" To="55"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Image.Triggers>
        </Image>
        <Grid x:Name="SettingsGrid" Background="Black" Visibility="Hidden" Opacity="0">
            <Label Content="Preferences" FontSize="22" FontWeight="SemiBold"/>
            <Label Content="Ancestor Key" Margin="0, 40, 0,0"/>
            <ComboBox x:Name="Settings_AncestorCombo" Margin="80,43,0,0" Width="120">
                <ComboBoxItem Content="Ctrl" />
                <ComboBoxItem Content="Alt" />
                <ComboBoxItem Content="Shift" />
                <ComboBoxItem Content="Ctrl + Alt" />
                <ComboBoxItem Content="Ctrl + Shift"/>
                <ComboBoxItem Content="Shift + Alt" />
                <ComboBoxItem Content="Ctrl +Alt + Shift" />
            </ComboBox>
            <CheckBox x:Name="Settings_OrinateCheck" Content="Auto Orinate Vision" Margin="5, 73,0,0" />
            <Label Content="Vision Timeout" Margin="0, 96, 0, 0"/>
            <ComboBox x:Name="Settings_TimeoutCombo" Margin="100, 99, 0, 0" Width="120">
                <ComboBoxItem Content="0.5 s"/>
                <ComboBoxItem Content="1 s"/>
                <ComboBoxItem Content="2 s"/>
                <ComboBoxItem Content="3 s"/>
                <ComboBoxItem Content="4 s"/>
                <ComboBoxItem Content="5 s"/>
                <ComboBoxItem Content="10 s"/>
                <ComboBoxItem Content="60 s"/>
            </ComboBox>
            <Button Content="Revalidate Library" Margin="5, 130, 0, 0" Height="24" Width="200"/>
            <Grid.Resources>
                <Style TargetType="Label" >
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="HorizontalAlignment" Value="Left"/>
                    <Setter Property="VerticalAlignment" Value="Top"/>
                </Style>
                <Style TargetType="CheckBox" >
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="HorizontalAlignment" Value="Left"/>
                    <Setter Property="VerticalAlignment" Value="Top"/>
                </Style>
                <Style TargetType="ComboBox">
                    <Setter Property="HorizontalAlignment" Value="Left"/>
                    <Setter Property="VerticalAlignment" Value="Top"/>
                </Style>
                <Style TargetType="Button">
                    <Setter Property="HorizontalAlignment" Value="Left"/>
                    <Setter Property="VerticalAlignment" Value="Top"/>
                </Style>
            </Grid.Resources>
        </Grid>
        <player:MaterialButton x:Name="SettingsButton" Icon="Settings"  HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,145,25" />

    </Grid>
    <Window.Resources>
        <SolidColorBrush x:Key="KeyOfBackground" Color="#FF303030" />
        <SolidColorBrush x:Key="KeyOfForeground" Color="#FEEE" />
        <Style TargetType="{x:Type Label}" x:Key="TimeLabel">
            <Setter Property="Foreground" Value="White" />
            <Setter Property="VerticalAlignment" Value="Bottom"/>
            <Setter Property="Width" Value="40" />
        </Style>
        <sys:Double x:Key="Height">400</sys:Double>
        <sys:Double x:Key="Width">400</sys:Double>

        <Storyboard x:Key="VisionOnBoard" AccelerationRatio="0.1" DecelerationRatio="0.8" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation Storyboard.TargetName="Player"
                                     From="{Binding Opacity, ElementName=Player}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="MiniArtworkImage"
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="TitleLabel"
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="SettingsButton"
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="PlayModeButton"
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="0"/>
        </Storyboard>
        <Storyboard x:Key="VisionOffBoard" SpeedRatio="2" AccelerationRatio="0.1" DecelerationRatio="0.8" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation Storyboard.TargetName="Player"
                                     From="{Binding Opacity, ElementName=Player}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="MiniArtworkImage"
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="TitleLabel"
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="SettingsButton" 
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="PlayModeButton"
                                     From="{Binding Opacity, ElementName=TitleLabel}" To="1"/>
        </Storyboard>
        <Storyboard x:Key="FullVisionOnBoard" FillBehavior="HoldEnd" AccelerationRatio="0.5" DecelerationRatio="0.5" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation Storyboard.TargetName="PlayPauseButton"
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="NextButton" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="PreviousButton" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="PositionSlider"
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="TimeLabel_Current" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="TimeLabel_Full" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="VisionButton" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
            <DoubleAnimation Storyboard.TargetName="VolumeButton" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="0"/>
        </Storyboard>
        <Storyboard x:Key="FullVisionOffBoard" FillBehavior="HoldEnd" AccelerationRatio="0.1" DecelerationRatio="0.8" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation Storyboard.TargetName="PlayPauseButton"
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="NextButton"
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="PreviousButton"
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="PositionSlider" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="TimeLabel_Current" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="TimeLabel_Full" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="VisionButton" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
            <DoubleAnimation Storyboard.TargetName="VolumeButton" 
                                     From="{Binding Opacity, ElementName=PlayPauseButton}" To="1"/>
        </Storyboard>
        <Storyboard x:Key="SettingsOnBoard" AccelerationRatio="0.1" DecelerationRatio="0.9" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation From="{Binding ElementName=SettingsGrid, Path=Opacity}" To="1" Storyboard.TargetName="SettingsGrid"/>
        </Storyboard>
        <Storyboard x:Key="SettingsOffBoard" AccelerationRatio="0.1" DecelerationRatio="0.9" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation From="{Binding ElementName=SettingsGrid, Path=Opacity}" To="0" Storyboard.TargetName="SettingsGrid"/>
        </Storyboard>
        <Storyboard x:Key="WindowWidthBoard" SpeedRatio="1" AccelerationRatio="0.5" DecelerationRatio="0.5" Storyboard.TargetName="window">
            <DoubleAnimation Storyboard.TargetProperty="Width" />
        </Storyboard>
    </Window.Resources>
</Window>
