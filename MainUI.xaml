<Window
    x:Class="Player.MainUI" Background="Transparent"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" KeyUp="window_KeyUp"
    xmlns:player="clr-namespace:Player.Controls" xmlns:sys="clr-namespace:System;assembly=mscorlib"
    x:Name="window"
    mc:Ignorable="d" Loaded="Window_Loaded" Closing="Window_Closing" Drop="Window_Drop" AllowDrop="True"
    Title="Elephant Player" Height="544" Width="432" SizeChanged="Window_SizeChanged">
    <Grid Background="{DynamicResource KeyOfBackground}">
        <player:MaterialButton x:Name="SettingsButton" Icon="settings" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="4"/>
        <Popup PlacementTarget="{Binding ElementName=SettingsButton}" Placement="Left">
            <Grid Background="#F333">
                <Grid.Resources>
                    <Style TargetType="CheckBox">
                        <Setter Property="Foreground" Value="White" />
                        <EventSetter Event="Checked" Handler="AnySettingChanged" />
                        <EventSetter Event="Unchecked" Handler="AnySettingChanged" />
                    </Style>
                    <Style TargetType="GroupBox">
                        <Setter Property="BorderBrush" Value="#FF004080" />
                        <Setter Property="BorderThickness" Value="1,0,0,2" />
                    </Style>
                    <Style TargetType="Label">
                        <Setter Property="Foreground" Value="White" />
                    </Style>
                </Grid.Resources>
                <ScrollViewer>
                    <ScrollViewer.Resources>
                        <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">10</sys:Double>
                    </ScrollViewer.Resources>
                    <StackPanel Width="500">
                        <GroupBox Height="50">
                            <GroupBox.Header>
                                <Label Content="Playback" Foreground="White" FontWeight="Light" FontSize="18"/>
                            </GroupBox.Header>
                            <Canvas>

                            </Canvas>
                        </GroupBox>
                        <GroupBox Height="140">
                            <GroupBox.Header>
                                <Label Content="Library" FontWeight="Light" FontSize="18" Foreground="White"/>
                            </GroupBox.Header>
                            <Canvas>
                                <CheckBox Content="Massive Library" x:Name="Pref_MassLib"/>
                                <CheckBox Content="Double Validation" Canvas.Top="20" x:Name="Pref_DoubleValid"/>
                                <CheckBox Content="Light-Weight Initialization" Canvas.Top="40" x:Name="Pref_LightWeight"/>
                                <Label Content="Library Location: " Foreground="White" Canvas.Top="60" Canvas.Left="30"/>
                                <player:MaterialButton Icon="folder_open" Canvas.Top="60" Foreground="White" />
                            </Canvas>
                        </GroupBox>
                        <GroupBox Height="140">
                            <GroupBox.Header>
                                <Label Content="Debug" FontWeight="Light" FontSize="18" Foreground="White"/>
                            </GroupBox.Header>
                            <Canvas>
                                <CheckBox Content="High Latency" x:Name="Pref_Latency"/>
                                <CheckBox Content="Send WM Debug Messages " Canvas.Top="20" x:Name="Pref_WM"/>
                                <CheckBox Content="Windows Presentation Acceleration" Canvas.Top="40" x:Name="Pref_WPF"/>
                                <CheckBox Content="IPC Pipes" Canvas.Top="60" x:Name="Pref_IPC"/>
                                <CheckBox Content="Manual Garbage Collection" Canvas.Top="80" x:Name="Pref_GC"/>
                            </Canvas>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Popup>
        <ListView x:Name="QueueListView" BorderThickness="0" Margin="0, 0, 0, 85" Background="{DynamicResource KeyOfBackground}">
            <ListView.Resources>
                <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">10</sys:Double>
            </ListView.Resources>
        </ListView>
        <Grid Height="80" Background="{DynamicResource KeyOfBackground}" VerticalAlignment="Bottom" x:Name="LowContentGrid">
                    <Image x:Name="MiniArtworkImage" Height="55" Width="55" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="3,3,0,0"/>
                    <Label Content="{DynamicResource Res_Title}" Foreground="White" Margin="60, 0, 0, 0" Height="30" VerticalAlignment="Top"/>
            <player:MaterialButton Icon="skip_previous" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="80,0,0,25" Click="PreviousButton_Click" />
            <player:MaterialButton Icon="skip_next" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="165,0,0,25" Click="NextButton_Click" />
            <player:MaterialButton x:Name="PlayPauseButton" Icon="play_arrow" Click="PlayPauseButtonClick" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="120,0,0,24" Height="28" Width="28"/>
            <player:MaterialButton x:Name="VisionButton" Icon="ondemand_video" Click="VisionButtonClick" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,5,34" Height="34" Width="34" EllipseType="Rectular"/>
            <player:MaterialButton x:Name="PlayModeButton" Icon="repeat" Click="PlayModeButton_Click" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,55,25" />
            <player:MaterialButton x:Name="AddUrlButton" Icon="add"  HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,100,25" />
            <Popup x:Name="UrlPopup" AllowsTransparency="True" PlacementTarget="{Binding ElementName=AddUrlButton}" Placement="Right" StaysOpen="False" PopupAnimation="Slide" >
                <StackPanel>
                    <Grid>
                        <TextBox x:Name="UrlTextBox" MinWidth="250" Text="http://URL" KeyDown="UrlTextBox_KeyDown" Height="28" FontSize="16"/>
                    </Grid>
                </StackPanel>
            </Popup>
        </Grid>
        <MediaElement Visibility="Visible" x:Name="Player" UnloadedBehavior="Manual" LoadedBehavior="Manual" MouseUp="Player_MouseUp" 
              Width="0" Height="0" MouseDown="Player_MouseDown" Volume="1" MediaEnded="Player_MediaEnded">
            <MediaElement.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Enter Full Screen" x:Name="PlayerC_FullScreen" Click="PlayerCFullScreen">
                        <MenuItem.Icon>
                            <player:MaterialIcon Icon="fullscreen" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Use subtitle" Click="PlayerCSubtitle">
                        <MenuItem.Icon>
                            <player:MaterialIcon Icon="subtitle" />
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </MediaElement.ContextMenu>
            <MediaElement.Resources>
                <Storyboard x:Key="VisionOnBoard">
                    <DoubleAnimation Storyboard.TargetName="Player" Storyboard.TargetProperty="Height"
                        From="{Binding ElementName=Player, Path=Height}" To="{DynamicResource Height}" 
                         AccelerationRatio="0.1" DecelerationRatio="0.8"           />
                    <DoubleAnimation Storyboard.TargetName="Player" Storyboard.TargetProperty="Width"
                        From="{Binding ElementName=Player, Path=Width}" To="{DynamicResource Width}" 
                               AccelerationRatio="0.1" DecelerationRatio="0.8"           />
                </Storyboard>
                <Storyboard x:Key="VisionOffBoard">
                    <DoubleAnimation Storyboard.TargetName="Player" Storyboard.TargetProperty="Height"
                        From="{Binding ElementName=Player, Path=Height}" To="0" 
                                AccelerationRatio="0.1" DecelerationRatio="0.8"          />
                    <DoubleAnimation Storyboard.TargetName="Player" Storyboard.TargetProperty="Width"
                        From="{Binding ElementName=Player, Path=Width}" To="0"
                                AccelerationRatio="0.1" DecelerationRatio="0.8"          />
                </Storyboard>
            </MediaElement.Resources>
                </MediaElement>

        <Slider x:Name="PositionSlider"  ValueChanged="PositionChanged" PreviewMouseDown="PositionMouseDown"  
               VerticalAlignment="Bottom" Maximum="1000"
                        Foreground="#FF575757" Margin="40, 0, 40, 5">
            <Slider.Triggers>
            </Slider.Triggers>
            <Slider.Template>
                <ControlTemplate >
                    <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                        <Grid>
                            <Border x:Name="TrackBackground" Grid.Row="1" VerticalAlignment="center">
                                <Canvas Margin="-6,-1">
                                    <Rectangle x:Name="PART_SelectionRange" Fill="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" Height="4.0" Visibility="Hidden"/>
                                </Canvas>
                            </Border>
                            <Track x:Name="PART_Track" Grid.Row="1">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Height="9" Click="Position_RepeatBackwardClick"  Background="{TemplateBinding Foreground}" BorderBrush="Transparent"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Height="5" Click="Position_RepeatForwardClick" Background="Transparent" />
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb x:Name="Thumb" Focusable="False" OverridesDefaultStyle="True" >
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="{x:Type Thumb}">
                                                <Grid >
                                                    <Ellipse Width="15" Height="15" x:Name="grip"  StrokeThickness="2" Stroke="{TemplateBinding Foreground}"
                                                             Fill="Transparent" Margin="-2, 0, 0, 0"/>
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="true">
                                                        <Setter Property="StrokeThickness" TargetName="grip" Value="3"/>

                                                    </Trigger>
                                                    <Trigger Property="IsDragging" Value="true">
                                                        <Setter Property="Fill" TargetName="grip" Value="DarkGray"/>
                                                        <Setter Property="StrokeThickness" TargetName="grip" Value="0" />
                                                    </Trigger>
                                                    <EventTrigger RoutedEvent="MouseEnter">
                                                        <BeginStoryboard>
                                                            <Storyboard >
                                                                <DoubleAnimation SpeedRatio="4" AccelerationRatio="0" DecelerationRatio="1" From="15" To="20" Storyboard.TargetName="grip" Storyboard.TargetProperty="Width"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                        <BeginStoryboard>
                                                            <Storyboard >
                                                                <DoubleAnimation SpeedRatio="4" AccelerationRatio="0" DecelerationRatio="1" From="15" To="20" Storyboard.TargetName="grip" Storyboard.TargetProperty="Height"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <EventTrigger RoutedEvent="MouseLeave">
                                                        <BeginStoryboard>
                                                            <Storyboard >
                                                                <DoubleAnimation SpeedRatio="2" AccelerationRatio="0" DecelerationRatio="1"  From="20" To="15" Storyboard.TargetName="grip" Storyboard.TargetProperty="Width"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                        <BeginStoryboard>
                                                            <Storyboard >
                                                                <DoubleAnimation SpeedRatio="2"  AccelerationRatio="0" DecelerationRatio="1" From="20" To="15" Storyboard.TargetName="grip" Storyboard.TargetProperty="Height"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Slider.Template>
        </Slider>
        <Label Content="00:00" Style="{DynamicResource TimeLabel}" HorizontalAlignment="Left" x:Name="TimeLabel_Current"/>
        <Label Content="00:00" Style="{DynamicResource TimeLabel}" HorizontalAlignment="Right" x:Name="TimeLabel_Full" Width="38"/>
        <Grid.Resources>
            <Popup x:Key="MetaPopup">
                <ScrollViewer Background="Transparent">
                    <StackPanel >
                        <Grid >
                            <Grid.Resources>
                                <Style TargetType="{x:Type TextBox}">
                                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                                    <Setter Property="Height" Value="22" />
                                    <Setter Property="VerticalAlignment" Value="Top" />
                                    <Setter Property="MaxLines" Value="1" />
                                    <Setter Property="Text" Value="Sample" />
                                    <Setter Property="Background" Value="Transparent" />
                                    <Setter Property="Foreground" Value="White" />

                                    <Style.Triggers>
                                        <Trigger Property="IsEnabled" Value="true">
                                            <Setter Property="Text" Value="NotSupported" />

                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                                <Style TargetType="{x:Type Label}">
                                    <Setter Property="HorizontalAlignment" Value="Left" />
                                    <Setter Property="VerticalAlignment" Value="Top" />
                                    <Setter Property="Foreground" Value="White" />
                                </Style>
                            </Grid.Resources>
                            <Label Content="Title" Margin="154,30,0,0" />
                            <TextBox x:Name="Meta_TitleBox" Margin="232,30,5,0"/>
                            <Label Content="Artist" Margin="154,55,0,0"/>
                            <TextBox x:Name="Meta_ArtistBox" Margin="232,55,5,0" />
                            <Label Content="Album" Margin="154,80,0,0"/>
                            <TextBox x:Name="Meta_AlbumBox" Margin="232,80,5,0" />
                            <Label Content="Album Artist" Margin="151,105,0,0" />
                            <TextBox x:Name="Meta_AlbumArtistBox" Margin="232,105,5,0" />
                            <Label Content="Composer" Margin="151,130,0,0" />
                            <TextBox x:Name="Meta_ComposerBox" Margin="232,130,5,0" />
                            <Label Content="Conductor" Margin="151,155,0,0" />
                            <TextBox x:Name="Meta_ConductorBox" Margin="232,155,5,0" />
                            <Label Content="Genre" Margin="151,180,0,0" />
                            <TextBox x:Name="Meta_GenreBox" Margin="232,180,5,0"  />
                            <Label Content="Track" Margin="151,205,0,0"/>
                            <TextBox x:Name="Meta_TrackBox" Margin="232,205,5,0" />
                            <Label Content="Comment" Margin="151,230,0,0" />
                            <TextBox x:Name="Meta_YearBox" Margin="232,230,5,0" />
                            <Label Content="Year" Margin="151,255,0,0"/>
                            <TextBox x:Name="Meta_CommentBox" Margin="232,255,5,0" />
                            <Label Content="Copyright" Margin="151,280,0,0" />
                            <TextBox x:Name="Meta_CopyrightBox" Margin="232,280,5,0" />
                            <Label Content="Lyrics" Margin="0, 305, 5, 0" />
                            <TextBox x:Name="Meta_LyricsBox" Margin="0, 325, 0, 0" Height="250"/>

                            <Image x:Name="Meta_ArtworkImage" Height="150" Width="150"  VerticalAlignment="Top" HorizontalAlignment="Left"/>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </Popup>
        </Grid.Resources>
    </Grid>
    <Window.Resources>
        <SolidColorBrush x:Key="KeyOfBackground" Color="#FF202020" />
        <SolidColorBrush x:Key="KeyOfForeground" Color="#FEEE" />
        <Style TargetType="{x:Type Label}" x:Key="TimeLabel">
            <Setter Property="Foreground" Value="White" />
            <Setter Property="VerticalAlignment" Value="Bottom"/>
            <Setter Property="Width" Value="40" />
        </Style>
        <sys:String x:Key="Res_Title">Player</sys:String>
        <player:IconType x:Key="Button_PlayIcon">play_arrow</player:IconType>
        <sys:Double x:Key="Height">400</sys:Double>
        <sys:Double x:Key="Width">400</sys:Double>

        <!--<SolidColorBrush x:Key="SliderThumb.Static.Foreground" Color="#FFE5E5E5"/>
        <SolidColorBrush x:Key="SliderThumb.MouseOver.Background" Color="#FFDCDCDC"/>-->
    </Window.Resources>
</Window>
